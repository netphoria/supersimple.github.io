<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda de Bebidas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #E0E5CE;
            --secondary-bg: #F0F3E8;
            --accent-bg: #F8FAF3;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: white;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .btn-wsp {
            background-color: #25D366;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            gap: 8px;
            transition: background-color 0.2s ease;
        }

        .btn-wsp:hover {
            background-color: #128C7E;
        }

        .btn-secondary {
            background-color: #f0f0f0;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            gap: 8px;
            margin-bottom: 12px;
            transition: background-color 0.2s ease;
        }

        .btn-secondary:hover {
            background-color: #e0e0e0;
        }

        .product-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .price-badge {
            background-color: var(--primary-bg);
            padding: 4px 10px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
        }

        .category-selector {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 12px 16px;
            border-radius: 8px;
            background-color: #f0f0f0;
            font-weight: 500;
            text-align: center;
            transition: all 0.3s ease;
            flex: 1;
        }

        .category-btn.active {
            background-color: #333;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            width: 100%;
            max-width: 500px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            margin: auto;
        }

        .modal-body {
            padding: 20px;
            max-height: calc(100vh - 160px);
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 24px;
            cursor: pointer;
            background: none;
            border: none;
            color: #666;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .close-modal:hover {
            background-color: #f0f0f0;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .quantity-btn:hover {
            background-color: #f5f5f5;
        }

        .quantity-input {
            width: 40px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 5px;
            font-size: 14px;
        }

        .type-switch {
            display: flex;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin-left: 8px;
        }

        .type-btn {
            padding: 5px 10px;
            background-color: white;
            border: none;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .type-btn.active {
            background-color: #333;
            color: white;
        }

        .input-field {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 12px;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .input-field:focus {
            outline: none;
            border-color: #999;
        }

        .product-card {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .product-info {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }

        .product-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-desc {
            color: #6b7280;
            font-size: 13px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-controls {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
            margin-left: auto;
        }

        .product-qty-container {
            display: flex;
            align-items: center;
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {
            .product-card {
                flex-wrap: wrap;
                position: relative;
                padding-bottom: 60px;
            }
            
            .product-image {
                width: 70px;
                height: 70px;
            }
            
            .product-controls {
                position: absolute;
                bottom: 12px;
                left: 12px;
                right: 12px;
                width: auto;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                margin-top: 8px;
            }
            
            .price-badge {
                margin-right: auto;
                margin-left: 0;
                order: 1;
            }
            
            .product-qty-container {
                order: 2;
            }
            
            .quantity-selector {
                margin-right: 8px;
            }
            
            .type-switch {
                margin-left: 0;
            }
        }

        @media (min-width: 480px) {
            .product-image {
                width: 90px;
                height: 90px;
            }
            
            .product-title {
                font-size: 16px;
            }
            
            .product-desc {
                font-size: 14px;
            }
        }

        @media (min-width: 640px) {
            .category-selector {
                flex-direction: row;
            }
            
            .quantity-btn {
                width: 32px;
                height: 32px;
            }
            
            .type-btn {
                padding: 6px 12px;
                font-size: 13px;
            }
            
            .product-card {
                flex-wrap: nowrap;
                padding-bottom: 12px;
            }
            
            .product-controls {
                position: static;
                flex-direction: column;
                align-items: flex-end;
                width: auto;
            }
            
            .price-badge {
                margin-right: 0;
                order: 0;
            }
            
            .product-qty-container {
                order: 0;
            }
        }

        @media (min-width: 768px) {
            .product-card {
                padding: 16px;
                gap: 16px;
            }
            
            .quantity-input {
                width: 45px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-white shadow-sm py-4 px-4 sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <h1 class="text-2xl font-bold text-center">Tienda de Bebidas</h1>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="flex-1 container mx-auto px-4 py-6">
        <!-- Category Selector -->
        <div class="category-selector">
            <button class="category-btn active" data-category="promos">Promociones</button>
            <button class="category-btn" data-category="gaseosas">Bebidas Gaseosas</button>
            <button class="category-btn" data-category="alcoholicas">Bebidas Alcohólicas</button>
        </div>
        
        <!-- Promos Section (Default) -->
        <section id="promos-section" class="category-section">
            <h2 class="text-xl font-semibold mb-4">Promociones Especiales</h2>
            <div class="space-y-3">
                <!-- Promo 1 -->
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1554866585-cd94860890b7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Combo Familiar" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">Combo Familiar</h3>
                        <p class="product-desc">2 Coca Cola 2.5L + 2 Fanta 2L + 1 Snacks</p>
                    </div>
                    <div class="product-controls">
                        <div class="price-badge">$1,200</div>
                        <div class="product-qty-container">
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-id="promo1">-</button>
                                <input type="text" id="cantidad-promo1" value="0" class="quantity-input" readonly>
                                <button class="quantity-btn plus" data-id="promo1">+</button>
                            </div>
                            <div class="type-switch" data-id="promo1">
                                <button class="type-btn active" data-type="unit">Unidad</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Promo 2 -->
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1672816936095-ce83c5edb06e?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Combo Refrescante" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">Combo Refrescante</h3>
                        <p class="product-desc">3 Jugos 1L + 2 Aguas Minerales</p>
                    </div>
                    <div class="product-controls">
                        <div class="price-badge">$950</div>
                        <div class="product-qty-container">
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-id="promo2">-</button>
                                <input type="text" id="cantidad-promo2" value="0" class="quantity-input" readonly>
                                <button class="quantity-btn plus" data-id="promo2">+</button>
                            </div>
                            <div class="type-switch" data-id="promo2">
                                <button class="type-btn active" data-type="unit">Unidad</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Gaseosas Section (Hidden by default) -->
        <section id="gaseosas-section" class="category-section hidden">
            <h2 class="text-xl font-semibold mb-4">Bebidas Gaseosas</h2>
            <div class="space-y-3">
                <!-- Gaseosa 1 -->
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1554866585-cd94860890b7?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Coca Cola" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">Coca Cola</h3>
                        <p class="product-desc">Botella 2.5L</p>
                    </div>
                    <div class="product-controls">
                        <div class="price-badge">$150</div>
                        <div class="product-qty-container">
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-id="gaseosa1">-</button>
                                <input type="text" id="cantidad-gaseosa1" value="0" class="quantity-input" readonly>
                                <button class="quantity-btn plus" data-id="gaseosa1">+</button>
                            </div>
                            <div class="type-switch" data-id="gaseosa1">
                                <button class="type-btn active" data-type="unit">Unidad</button>
                                <button class="type-btn" data-type="pack">Pack</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gaseosa 2 -->
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1601050690597-df0568f70950?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Sprite" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">Sprite</h3>
                        <p class="product-desc">Botella 2L</p>
                    </div>
                    <div class="product-controls">
                        <div class="price-badge">$140</div>
                        <div class="product-qty-container">
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-id="gaseosa2">-</button>
                                <input type="text" id="cantidad-gaseosa2" value="0" class="quantity-input" readonly>
                                <button class="quantity-btn plus" data-id="gaseosa2">+</button>
                            </div>
                            <div class="type-switch" data-id="gaseosa2">
                                <button class="type-btn active" data-type="unit">Unidad</button>
                                <button class="type-btn" data-type="pack">Pack</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Alcoholicas Section (Hidden by default) -->
        <section id="alcoholicas-section" class="category-section hidden">
            <h2 class="text-xl font-semibold mb-4">Bebidas Alcohólicas</h2>
            <div class="space-y-3">
                <!-- Alcoholica 1 -->
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1600788886242-5c96aabe3757?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Cerveza Heineken" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">Cerveza Heineken</h3>
                        <p class="product-desc">Lata 473ml</p>
                    </div>
                    <div class="product-controls">
                        <div class="price-badge">$350</div>
                        <div class="product-qty-container">
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-id="alcohol1">-</button>
                                <input type="text" id="cantidad-alcohol1" value="0" class="quantity-input" readonly>
                                <button class="quantity-btn plus" data-id="alcohol1">+</button>
                            </div>
                            <div class="type-switch" data-id="alcohol1">
                                <button class="type-btn active" data-type="unit">Unidad</button>
                                <button class="type-btn" data-type="pack">Pack</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Alcoholica 2 -->
                <div class="product-card">
                    <img src="https://images.unsplash.com/photo-1600788886242-5c96aabe3757?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Vino Malbec" class="product-image">
                    <div class="product-info">
                        <h3 class="product-title">Vino Malbec</h3>
                        <p class="product-desc">Botella 750ml</p>
                    </div>
                    <div class="product-controls">
                        <div class="price-badge">$850</div>
                        <div class="product-qty-container">
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-id="alcohol2">-</button>
                                <input type="text" id="cantidad-alcohol2" value="0" class="quantity-input" readonly>
                                <button class="quantity-btn plus" data-id="alcohol2">+</button>
                            </div>
                            <div class="type-switch" data-id="alcohol2">
                                <button class="type-btn active" data-type="unit">Unidad</button>
                                <button class="type-btn" data-type="pack">Pack</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Action Buttons -->
        <div class="mt-8">
            <button id="ver-pedido-btn" class="btn-secondary w-full">
                <span class="material-icons">shopping_cart</span> Ver mi pedido
            </button>
            <a id="wsp-link" class="btn-wsp w-full" href="#" target="_blank" rel="noopener" aria-label="Enviar pedido por WhatsApp">
                <span class="material-icons">chat</span> Enviar pedido por WhatsApp
            </a>
        </div>
    </main>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal">
                <span class="material-icons">close</span>
            </button>
            <div class="modal-body">
                <h2 class="text-xl font-semibold mb-6">Mi Pedido</h2>
                
                <!-- Customer Info -->
                <div class="mb-6">
                    <h3 class="font-medium mb-3">Información del Cliente</h3>
                    <input type="text" id="customer-name" class="input-field" placeholder="Nombre completo" required>
                    <input type="text" id="customer-address" class="input-field" placeholder="Dirección de entrega" required>
                </div>
                
                <div id="cart-items" class="space-y-4 mb-6">
                    <p class="text-gray-500 text-center">Tu carrito está vacío</p>
                </div>
                
                <div class="border-t border-gray-200 pt-4 mb-6">
                    <div class="flex justify-between mb-2">
                        <span>Subtotal</span>
                        <span id="subtotal" class="font-bold">$0.00</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span>Envío</span>
                        <span class="font-bold">$0.00</span>
                    </div>
                    <div class="flex justify-between font-bold text-lg">
                        <span>Total</span>
                        <span id="total">$0.00</span>
                    </div>
                </div>
                
                <a id="wsp-link-modal" class="btn-wsp w-full text-center" href="#" target="_blank" rel="noopener">
                    <span class="material-icons">chat</span> Enviar pedido por WhatsApp
                </a>
            </div>
        </div>
    </div>

    <script>
        // Product data
        const products = [
            // Promos
            { id: 'promo1', name: 'Combo Familiar', description: '2 Coca Cola 2.5L + 2 Fanta 2L + 1 Snacks', price: 1200, unitType: 'unit', packType: 'unit', packSize: 1, category: 'promos' },
            { id: 'promo2', name: 'Combo Refrescante', description: '3 Jugos 1L + 2 Aguas Minerales', price: 950, unitType: 'unit', packType: 'unit', packSize: 1, category: 'promos' },
            
            // Gaseosas
            { id: 'gaseosa1', name: 'Coca Cola', description: 'Botella 2.5L', price: 150, unitType: 'unit', packType: 'pack', packSize: 6, category: 'gaseosas' },
            { id: 'gaseosa2', name: 'Sprite', description: 'Botella 2L', price: 140, unitType: 'unit', packType: 'pack', packSize: 6, category: 'gaseosas' },
            
            // Alcoholicas
            { id: 'alcohol1', name: 'Cerveza Heineken', description: 'Lata 473ml', price: 350, unitType: 'unit', packType: 'pack', packSize: 12, category: 'alcoholicas' },
            { id: 'alcohol2', name: 'Vino Malbec', description: 'Botella 750ml', price: 850, unitType: 'unit', packType: 'pack', packSize: 6, category: 'alcoholicas' }
        ];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Category selector
            const categoryBtns = document.querySelectorAll('.category-btn');
            const categorySections = document.querySelectorAll('.category-section');

            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    btn.classList.add('active');
                    
                    // Hide all sections
                    categorySections.forEach(section => section.classList.add('hidden'));
                    
                    // Show selected section
                    const category = btn.dataset.category;
                    document.getElementById(`${category}-section`).classList.remove('hidden');
                });
            });

            // Quantity buttons
            document.querySelectorAll('.quantity-btn.plus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    const input = document.getElementById(`cantidad-${id}`);
                    input.value = parseInt(input.value) + 1;
                    updateCart();
                });
            });

            document.querySelectorAll('.quantity-btn.minus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    const input = document.getElementById(`cantidad-${id}`);
                    if (parseInt(input.value) > 0) {
                        input.value = parseInt(input.value) - 1;
                        updateCart();
                    }
                });
            });

            // Type switch buttons
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.parentElement.getAttribute('data-id');
                    const type = this.getAttribute('data-type');
                    
                    // Update active state
                    this.parentElement.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    updateCart();
                });
            });

            // Cart modal
            const cartModal = document.getElementById('cart-modal');
            const verPedidoBtn = document.getElementById('ver-pedido-btn');
            const closeModalBtn = document.getElementById('close-modal');
            const wspBtnModal = document.getElementById('wsp-link-modal');

            verPedidoBtn.addEventListener('click', () => {
                updateCart();
                cartModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });

            closeModalBtn.addEventListener('click', () => {
                cartModal.style.display = 'none';
                document.body.style.overflow = '';
            });

            window.addEventListener('click', (e) => {
                if (e.target === cartModal) {
                    cartModal.style.display = 'none';
                    document.body.style.overflow = '';
                }
            });

            // WhatsApp order button validation
            document.getElementById('wsp-link').addEventListener('click', function(event) {
                const customerName = document.getElementById('customer-name').value.trim();
                const customerAddress = document.getElementById('customer-address').value.trim();
                const total = parseFloat(document.getElementById('total').textContent.replace('$', ''));
                
                if (total === 0) {
                    event.preventDefault();
                    alert('Por favor agrega items a tu carrito antes de enviar el pedido.');
                    return;
                }
                
                if (!customerName || !customerAddress) {
                    event.preventDefault();
                    alert('Por favor completa tu nombre y dirección antes de enviar el pedido.');
                    document.getElementById('ver-pedido-btn').click();
                }
            });
            
            document.getElementById('wsp-link-modal').addEventListener('click', function(event) {
                const customerName = document.getElementById('customer-name').value.trim();
                const customerAddress = document.getElementById('customer-address').value.trim();
                
                if (!customerName || !customerAddress) {
                    event.preventDefault();
                    alert('Por favor completa tu nombre y dirección antes de enviar el pedido.');
                }
            });

            // Initialize cart
            updateCart();
        });

        // Update cart function
        function updateCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            let subtotal = 0;
            let cartHTML = '';
            
            // Check if any product has quantity > 0
            let hasItems = false;
            
            products.forEach(product => {
                const quantityInput = document.getElementById(`cantidad-${product.id}`);
                const typeSwitch = document.querySelector(`.type-switch[data-id="${product.id}"]`);
                const activeType = typeSwitch ? typeSwitch.querySelector('.type-btn.active').getAttribute('data-type') : 'unit';
                
                const quantity = parseInt(quantityInput.value);
                
                if (quantity > 0) {
                    hasItems = true;
                    const isPack = activeType === product.packType;
                    const itemPrice = isPack ? product.price * product.packSize : product.price;
                    const totalPrice = itemPrice * quantity;
                    subtotal += totalPrice;
                    
                    cartHTML += `
                        <div class="border-b border-gray-200 pb-4">
                            <div class="flex justify-between">
                                <h3 class="font-medium">${product.name}</h3>
                                <button onclick="removeItem('${product.id}')" class="text-red-500 text-sm">Eliminar</button>
                            </div>
                            <p class="text-sm text-gray-500">${product.description}</p>
                            <p class="text-sm">${quantity} ${isPack ? 'packs' : 'unidades'} x $${itemPrice.toFixed(2)}</p>
                            <p class="font-bold">$${totalPrice.toFixed(2)}</p>
                        </div>
                    `;
                }
            });
            
            if (!hasItems) {
                cartHTML = '<p class="text-gray-500 text-center">Tu carrito está vacío</p>';
            }
            
            cartItemsContainer.innerHTML = cartHTML;
            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('total').textContent = `$${subtotal.toFixed(2)}`;
            
            // Update WhatsApp links
            updateWhatsAppLink(document.getElementById('wsp-link-modal'));
            updateWhatsAppLink(document.getElementById('wsp-link'));
        }
        
        // Remove item function
        function removeItem(productId) {
            const quantityInput = document.getElementById(`cantidad-${productId}`);
            quantityInput.value = 0;
            updateCart();
        }
        
        // Update WhatsApp link function
        function updateWhatsAppLink(button) {
            const customerName = document.getElementById('customer-name').value.trim();
            const customerAddress = document.getElementById('customer-address').value.trim();
            
            let message = 'Hola, quiero hacer un pedido:\n\n';
            
            if (customerName) {
                message += `Nombre: ${customerName}\n`;
            }
            if (customerAddress) {
                message += `Dirección: ${customerAddress}\n`;
            }
            
            message += '\nDetalles del pedido:\n';
            
            let total = 0;
            let hasItems = false;
            
            products.forEach(product => {
                const quantity = parseInt(document.getElementById(`cantidad-${product.id}`)?.value || 0);
                const typeSwitch = document.querySelector(`.type-switch[data-id="${product.id}"]`);
                const activeType = typeSwitch ? typeSwitch.querySelector('.type-btn.active').getAttribute('data-type') : 'unit';
                
                if (quantity > 0) {
                    hasItems = true;
                    const isPack = activeType === product.packType;
                    const itemPrice = isPack ? product.price * product.packSize : product.price;
                    const itemTotal = itemPrice * quantity;
                    total += itemTotal;
                    
                    message += `${product.name} (${product.description}) = ${quantity} ${isPack ? 'packs' : 'unidades'} x $${itemPrice} = $${itemTotal}\n`;
                }
            });
            
            if (total > 0) {
                message += `\nTotal: $${total}`;
                const phoneNumber = '5492612751564'; // Reemplaza con tu número
                const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                button.setAttribute('href', url);
            } else {
                button.removeAttribute('href');
            }
        }
    </script>
</body>
</html>
